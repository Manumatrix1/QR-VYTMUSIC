<!DOCTYPE html>
<html lang="es">
<head>
    </head>
<body class="antialiased">
    <script type="module">
        import { db, storage } from './firebase_config.js';
        import { collection, onSnapshot, query, addDoc, doc, deleteDoc, writeBatch } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { ref, uploadBytes, getDownloadURL, deleteObject } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-storage.js";

        // ... (L√≥gica inicial y funciones de UI sin cambios) ...

        function renderFullVotingResults(artists) {
            ui.votesStats.innerHTML = '';
            if (!artists || artists.length === 0) {
                ui.votesStats.innerHTML = '<p class="text-center text-gray-400">No hay artistas registrados.</p>';
                return;
            }
            const sortedArtists = [...artists].sort((a, b) => (b.totalScore || 0) - (a.totalScore || 0) || a.name.localeCompare(b.name));

            sortedArtists.forEach((artist, index) => {
                const card = document.createElement('div');
                card.className = 'bg-gray-700 p-4 rounded-lg flex items-center justify-between gap-4';
                card.innerHTML = `
                    <div class="artist-image-container-small">
                        <img src="${artist.photoURL || 'https://placehold.co/60x60/1f2937/f9fafb?text=ART'}" alt="${artist.name}" class="artist-image">
                    </div>
                    <div class="flex-grow">
                        <p class="font-semibold text-lg text-sky-300">${index + 1}. ${artist.name}</p>
                        <p class="text-sm text-gray-400">Votos: ${artist.totalRatingsCount || 0}</p>
                    </div>
                    <div class="text-right flex-shrink-0">
                        <span class="text-2xl font-bold text-green-400">${artist.totalScore || 0}</span>
                        <span class="text-gray-400 text-sm">puntos</span>
                    </div>
                    <button data-id="${artist.id}" class="delete-artist-btn ml-4 p-2 bg-red-600 hover:bg-red-800 rounded-full leading-none">üóëÔ∏è</button>
                `;
                ui.votesStats.appendChild(card);
            });
        }
        
        // Listener para eliminar artista
        ui.votesStats.addEventListener('click', async (e) => {
            const target = e.target.closest('.delete-artist-btn');
            if (target) {
                const artistId = target.dataset.id;
                if (confirm("¬øSeguro que quieres eliminar a este artista de la votaci√≥n?")) {
                    await deleteDoc(doc(db, `events/${eventId}/artists`, artistId));
                }
            }
        });

        // ... (resto del script sin cambios) ...
    </script>
</body>
</html>