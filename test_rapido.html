<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ Test CÃ¡mara RÃ¡pido</title>
    <meta http-equiv="Cache-Control" content="no-cache">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white p-4">
    <div class="max-w-md mx-auto">
        <h1 class="text-xl font-bold mb-4">ğŸš€ Test CÃ¡mara Ultra RÃ¡pido</h1>
        
        <div id="result" class="mb-4 p-4 rounded bg-gray-800">
            <p>Presiona el botÃ³n para probar...</p>
        </div>
        
        <button onclick="testNow()" class="w-full bg-blue-600 p-4 rounded font-bold mb-4">
            ğŸ“· PROBAR CÃMARA AHORA
        </button>
        
        <video id="video" autoplay muted playsinline class="w-full h-48 bg-black rounded" style="display:none;"></video>
        
        <button onclick="stop()" class="w-full bg-red-600 p-2 rounded mt-2" style="display:none;" id="stopBtn">
            âŒ Detener
        </button>
    </div>

    <script>
        let stream = null;
        
        async function testNow() {
            const result = document.getElementById('result');
            const video = document.getElementById('video');
            const stopBtn = document.getElementById('stopBtn');
            
            result.innerHTML = '<p class="text-yellow-400">ğŸ”„ Probando...</p>';
            
            try {
                stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                video.srcObject = stream;
                video.style.display = 'block';
                stopBtn.style.display = 'block';
                
                result.innerHTML = '<p class="text-green-400">âœ… Â¡Ã‰XITO! La cÃ¡mara funciona perfectamente</p>';
                
            } catch (error) {
                result.innerHTML = `
                    <p class="text-red-400">âŒ Error: ${error.name}</p>
                    <p class="text-sm">${error.message}</p>
                    <p class="text-xs mt-2">User Agent: ${navigator.userAgent}</p>
                `;
            }
        }
        
        function stop() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                document.getElementById('video').style.display = 'none';
                document.getElementById('stopBtn').style.display = 'none';
                document.getElementById('result').innerHTML = '<p>CÃ¡mara detenida. Presiona el botÃ³n para probar de nuevo.</p>';
            }
        }
    </script>
</body>
</html>