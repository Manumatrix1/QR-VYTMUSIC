<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Patrocinador Clases de Canto - VYTMUSIC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #111827; color: #f9fafb; }
    </style>
</head>
<body class="antialiased">
    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js';
        import { getFirestore, collection, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/11.0.1/firebase-storage.js';

        // Configuraci√≥n Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBak7OOEw5Efmssg63TDhYqNz6cZrPFBX4",
            authDomain: "vyt-music-qr.firebaseapp.com",
            projectId: "vyt-music-qr",
            storageBucket: "vyt-music-qr.appspot.com",
            messagingSenderId: "510194692969",
            appId: "1:510194692969:web:5a3c8ab82fa892b8ddf45c"
        };

        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);

        console.log("üî• Firebase inicializado correctamente");

        // Funci√≥n para agregar patrocinador de Clases de Canto autom√°ticamente
        async function agregarClasesCanto() {
            try {
                console.log("üéØ Agregando patrocinador Clases de Canto...");

                // Datos del patrocinador
                const sponsorData = {
                    title: "Clases de Canto",
                    description: "¬°Desarrolla tu talento vocal! Clases personalizadas para todos los niveles, desde principiantes hasta avanzados. T√©cnica, repertorio y preparaci√≥n para audiciones.",
                    imageUrl: "./CLASES.png", // Imagen que ya est√° en el repositorio
                    linkUrl: "https://wa.me/message/YOUR_WHATSAPP_NUMBER", // Cambiar por el n√∫mero real
                    ctaText: "¬°Reserva tu clase!",
                    createdAt: serverTimestamp(),
                    active: true
                };

                // Agregar a Firebase
                const docRef = await addDoc(collection(db, 'sponsors'), sponsorData);
                console.log("‚úÖ Patrocinador agregado con ID:", docRef.id);

                // Mostrar resultado
                document.getElementById('resultado').innerHTML = `
                    <div class="bg-green-800 p-6 rounded-lg">
                        <h2 class="text-2xl font-bold text-green-400 mb-4">‚úÖ ¬°Patrocinador Agregado!</h2>
                        <div class="space-y-2">
                            <p><strong>T√≠tulo:</strong> ${sponsorData.title}</p>
                            <p><strong>Descripci√≥n:</strong> ${sponsorData.description}</p>
                            <p><strong>Imagen:</strong> ${sponsorData.imageUrl}</p>
                            <p><strong>CTA:</strong> ${sponsorData.ctaText}</p>
                            <p><strong>ID en Firebase:</strong> ${docRef.id}</p>
                        </div>
                        <div class="mt-6 space-x-4">
                            <a href="https://vytmusic.netlify.app/voting_page.html" target="_blank" 
                               class="inline-block px-6 py-3 bg-sky-600 text-white rounded-lg font-bold hover:bg-sky-700">
                                Ver en P√°gina de Votaci√≥n
                            </a>
                            <a href="https://vytmusic.netlify.app/gestion_votacion.html" target="_blank" 
                               class="inline-block px-6 py-3 bg-purple-600 text-white rounded-lg font-bold hover:bg-purple-700">
                                Gestionar Patrocinadores
                            </a>
                        </div>
                    </div>
                `;

            } catch (error) {
                console.error("‚ùå Error al agregar patrocinador:", error);
                document.getElementById('resultado').innerHTML = `
                    <div class="bg-red-800 p-6 rounded-lg">
                        <h2 class="text-2xl font-bold text-red-400 mb-4">‚ùå Error</h2>
                        <p>No se pudo agregar el patrocinador: ${error.message}</p>
                        <button onclick="agregarClasesCanto()" class="mt-4 px-6 py-3 bg-sky-600 text-white rounded-lg font-bold hover:bg-sky-700">
                            Intentar Nuevamente
                        </button>
                    </div>
                `;
            }
        }

        // Hacer la funci√≥n global
        window.agregarClasesCanto = agregarClasesCanto;

        // Auto-ejecutar cuando la p√°gina carga
        window.addEventListener('DOMContentLoaded', () => {
            console.log("üöÄ P√°gina cargada, listo para agregar patrocinador");
        });
    </script>

    <div class="container mx-auto max-w-2xl p-6">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-sky-400 mb-4">Agregar Patrocinador</h1>
            <p class="text-xl text-gray-300">Clases de Canto - VYTMUSIC</p>
        </header>

        <main class="space-y-6">
            <div class="bg-gray-800 p-6 rounded-lg">
                <h2 class="text-2xl font-bold mb-4">Vista Previa del Patrocinador</h2>
                <div class="bg-gradient-to-r from-purple-900 via-blue-900 to-indigo-900 p-6 rounded-xl shadow-xl">
                    <div class="flex items-center space-x-4">
                        <img src="./CLASES.png" alt="Clases de Canto" class="w-20 h-20 rounded-lg object-cover shadow-lg">
                        <div class="flex-1">
                            <h3 class="text-2xl font-bold text-white mb-2">Clases de Canto</h3>
                            <p class="text-gray-200 text-sm mb-3">¬°Desarrolla tu talento vocal! Clases personalizadas para todos los niveles, desde principiantes hasta avanzados.</p>
                            <button class="px-4 py-2 bg-yellow-500 text-black font-bold rounded-lg hover:bg-yellow-400 transition-colors">
                                ¬°Reserva tu clase!
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center">
                <button onclick="agregarClasesCanto()" 
                        class="px-8 py-4 bg-green-600 text-white text-xl font-bold rounded-lg hover:bg-green-700 transition-colors shadow-lg">
                    üéµ Agregar Patrocinador Clases de Canto
                </button>
                <p class="text-gray-400 text-sm mt-2">Esto agregar√° autom√°ticamente la tarjeta a la base de datos</p>
            </div>

            <div id="resultado" class="mt-8">
                <!-- Los resultados aparecer√°n aqu√≠ -->
            </div>
        </main>

        <footer class="text-center mt-8">
            <div class="space-x-4">
                <a href="gestion_votacion.html" class="text-sky-400 hover:underline">‚Üê Volver a Gesti√≥n</a>
                <a href="voting_page.html" class="text-sky-400 hover:underline">Ver P√°gina de Votaci√≥n ‚Üí</a>
            </div>
        </footer>
    </div>
</body>
</html>