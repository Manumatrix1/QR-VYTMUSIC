<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Debug Firebase</title>
</head>
<body>
    <h1>üîç Debug Firebase Collections</h1>
    <div id="results"></div>

    <script type="module">
        import { db } from './firebase_config.js';
        import { collection, getDocs } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';

        const results = document.getElementById('results');

        async function debugCollections() {
            console.log('üîç Verificando colecciones...');
            results.innerHTML = '<h2>Verificando colecciones...</h2>';
            
            const collectionsToCheck = ['users', 'jury_users', 'jurors'];
            
            for (const collectionName of collectionsToCheck) {
                try {
                    console.log(`üìÇ Revisando colecci√≥n: ${collectionName}`);
                    const snapshot = await getDocs(collection(db, collectionName));
                    
                    results.innerHTML += `<div style="margin: 20px; padding: 10px; border: 1px solid #ccc;">
                        <h3>üìÇ ${collectionName}</h3>
                        <p>üìä Total documentos: ${snapshot.size}</p>
                    `;
                    
                    if (snapshot.size > 0) {
                        results.innerHTML += '<h4>Documentos:</h4><ul>';
                        snapshot.forEach(doc => {
                            const data = doc.data();
                            results.innerHTML += `<li><strong>${doc.id}</strong>: ${data.name || 'Sin nombre'} (${data.type || data.typeLabel || 'Sin tipo'})</li>`;
                            console.log(`üìÑ ${doc.id}:`, data);
                        });
                        results.innerHTML += '</ul>';
                    }
                    
                    results.innerHTML += '</div>';
                    
                } catch (error) {
                    console.error(`‚ùå Error en ${collectionName}:`, error);
                    results.innerHTML += `<div style="color: red;">‚ùå Error en ${collectionName}: ${error.message}</div>`;
                }
            }
            
            console.log('‚úÖ Debug completado');
        }

        debugCollections();
    </script>
</body>
</html>